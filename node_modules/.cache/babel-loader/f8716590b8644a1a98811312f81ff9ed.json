{"ast":null,"code":"import _toConsumableArray from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _objectSpread from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Component}from'react';import Select from'react-select';import{GoFold,GoUnfold,GoSearch}from'react-icons/go';import RegionDropdown from'./RegionDropdown';import RegionSelectOption from'./RegionSelectOption';import{formatDate,getDataFromRegion}from'../utils/utils';import*as str from'../utils/strings';import i18n from'../data/i18n.yml';var selectStyles={control:function control(provided,state){return _objectSpread(_objectSpread({},provided),{},{minWidth:240,marginBottom:8,borderRadius:30});},menu:function menu(){return{backgroundColor:'white',boxShadow:'0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',cursor:'pointer'};},option:function option(provided,state){return _objectSpread(_objectSpread({},provided),{},{textAlign:'left',fontSize:12,backgroundColor:state.isFocused?'var(--primary-color-5)':state.isSelected?'#eee':null,color:state.isFocused?'#fff':'#000',cursor:'pointer'});}};var selectStylesDark={control:function control(provided,state){return _objectSpread(_objectSpread({},provided),{},{minWidth:240,marginBottom:8,borderRadius:30});},menu:function menu(){return{backgroundColor:'var(--dark-grey)',boxShadow:'0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',cursor:'pointer'};},option:function option(provided,state){return _objectSpread(_objectSpread({},provided),{},{textAlign:'left',fontSize:12,backgroundColor:state.isFocused?'var(--primary-color-4)':state.isSelected?'#777':null,color:'var(--lighter-grey)',cursor:'pointer'});}};var Region=/*#__PURE__*/function(_Component){_inherits(Region,_Component);var _super=_createSuper(Region);function Region(){var _this;_classCallCheck(this,Region);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isOpen:false,//value: undefined,\nvalue:'en',options:[],countryOnly:true};_this.toggleOpen=function(){_this.setState(function(state){return{isOpen:!state.isOpen};});};_this.toggleCountryOnly=function(){_this.props.ReactTooltip.hide(_this.regionSelectMore);_this.setState({countryOnly:!_this.state.countryOnly});};_this.onSelectChange=function(selected){_this.toggleOpen();_this.setState({value:selected});_this.props.regionToggle(selected.region);};_this.generateOptions=function(root){var _this$props=_this.props,data=_this$props.data,lang=_this$props.lang,date=_this$props.date,metric=_this$props.metric;var englishRoot=_toConsumableArray(Array(root.length).keys()).map(function(i){return root.slice(0,i+1);}).map(function(regionList){return getDataFromRegion(data,regionList).ENGLISH;});var options=[];var regionData=getDataFromRegion(data,root);Object.keys(regionData).filter(function(d){return!['confirmedCount','deadCount','curedCount','ENGLISH'].includes(d);}).sort(function(a,b){var aCount=regionData[a][metric][date]?regionData[a][metric][date]:0;var bCount=regionData[b][metric][date]?regionData[b][metric][date]:0;return aCount>bCount?-1:1;}).forEach(function(d){options.push({value:lang==='zh'?[].concat(_toConsumableArray(root),[d]).join(''):[].concat(_toConsumableArray(englishRoot),[regionData[d].ENGLISH]).join(''),region:[].concat(_toConsumableArray(root),[d]),label:/*#__PURE__*/React.createElement(RegionSelectOption,{region:lang==='zh'?[].concat(_toConsumableArray(root),[d]):[].concat(_toConsumableArray(englishRoot),[regionData[d].ENGLISH]),data:regionData[d],date:date,metric:metric})});var childData=getDataFromRegion(data,[].concat(_toConsumableArray(root),[d]));var showSubRegions=[str.CHINA_ZH,str.FRANCE_ZH,str.UK_ZH,str.NETHERLANDS_ZH,str.DENMARK_ZH];if(Object.keys(childData).length>4&&(!_this.state.countryOnly||root.length===0&&showSubRegions.includes(d)))options=[].concat(_toConsumableArray(options),_toConsumableArray(_this.generateOptions([].concat(_toConsumableArray(root),[d]))));});return options;};_this.displayRegionName=function(){var _this$props2=_this.props,currentRegion=_this$props2.currentRegion,data=_this$props2.data,lang=_this$props2.lang;// remove duplicates in case same region occurs at different level (e.g. Japan)\nvar region=_toConsumableArray(new Set(currentRegion));if(lang==='zh'){region=region.join('');// China\nregion=region!==str.CHINA_ZH?region.replace(str.CHINA_ZH,''):str.CHINA_ZH;region=region!==str.INTL_CONVEYANCE_ZH?region.replace(str.INTL_CONVEYANCE_ZH,''):str.INTL_CONVEYANCE_ZH;region=region!==str.MAINLAND_CHINA_ZH?region.replace(str.MAINLAND_CHINA_ZH,''):str.MAINLAND_CHINA_ZH;// France\nregion=region!==\"\".concat(str.FRANCE_ZH).concat(str.METRO_FRANCE_ZH)?region.replace(str.METRO_FRANCE_ZH,''):str.METRO_FRANCE_ZH;region=region!==\"\".concat(str.FRANCE_ZH).concat(str.OVERSEAS_FRANCE_ZH)?region.replace(\"\".concat(str.FRANCE_ZH).concat(str.OVERSEAS_FRANCE_ZH),''):\"\".concat(str.FRANCE_ZH).concat(str.OVERSEAS_FRANCE_ZH);// UK\nregion=region!==\"\".concat(str.UK_ZH).concat(str.OVERSEAS_TERRITORIES_ZH)?region.replace(\"\".concat(str.UK_ZH).concat(str.OVERSEAS_TERRITORIES_ZH),''):\"\".concat(str.UK_ZH).concat(str.OVERSEAS_TERRITORIES_ZH);region=region!==\"\".concat(str.UK_ZH).concat(str.CROWN_DEPENDENCIES_ZH)?region.replace(\"\".concat(str.UK_ZH).concat(str.CROWN_DEPENDENCIES_ZH),''):\"\".concat(str.UK_ZH).concat(str.CROWN_DEPENDENCIES_ZH);return region;}else{if(data==null)return;var englishRegion=_toConsumableArray(Array(currentRegion.length).keys()).map(function(i){return currentRegion.slice(0,i+1);}).map(function(regionList){return getDataFromRegion(data,regionList).ENGLISH;});englishRegion=_toConsumableArray(new Set(englishRegion));region=englishRegion.reverse().join(', ');// China\nregion=region!==str.CHINA_EN?region.replace(\", \".concat(str.CHINA_EN),''):str.CHINA_EN;region=region!==str.MAINLAND_CHINA_EN?region.replace(\", \".concat(str.MAINLAND_CHINA_EN),''):str.MAINLAND_CHINA_EN;// France\nregion=region!==\"\".concat(str.METRO_FRANCE_EN,\", \").concat(str.FRANCE_EN)?region.replace(\", \".concat(str.METRO_FRANCE_EN),''):str.METRO_FRANCE_EN;region=region!==\"\".concat(str.OVERSEAS_FRANCE_EN,\", \").concat(str.FRANCE_EN)?region.replace(\", \".concat(str.OVERSEAS_FRANCE_EN,\", \").concat(str.FRANCE_EN),''):str.OVERSEAS_FRANCE_EN;// Cruise ship\nregion=region!==str.INTL_CONVEYANCE_EN?region.replace(\", \".concat(str.INTL_CONVEYANCE_EN),''):str.INTL_CONVEYANCE_EN;// USA\nregion=region!==str.US_EN?region.replace(str.US_EN,'US'):str.US_EN;// UK\nregion=region!==str.UK_EN?region.replace(str.UK_EN,'UK'):str.UK_EN;region=region!==\"\".concat(str.OVERSEAS_TERRITORIES_EN,\", \").concat(str.UK_ABBR_EN)?region.replace(\", \".concat(str.OVERSEAS_TERRITORIES_EN,\", \").concat(str.UK_ABBR_EN),''):str.OVERSEAS_TERRITORIES_EN;region=region!==\"\".concat(str.CROWN_DEPENDENCIES_EN,\", \").concat(str.UK_ABBR_EN)?region.replace(\", \".concat(str.CROWN_DEPENDENCIES_EN,\", \").concat(str.UK_ABBR_EN),''):str.CROWN_DEPENDENCIES_EN;return region;}};_this.displayDate=function(){var _this$props3=_this.props,lang=_this$props3.lang,date=_this$props3.date;return formatDate(date,lang);};_this.showTooltip=function(){// show tooltip only when text is overflow\nvar elem=document.querySelector(\".current-region div\");if(elem==null)return true;return elem.offsetWidth===elem.scrollWidth;};return _this;}_createClass(Region,[{key:\"componentDidMount\",value:function componentDidMount(){var options=this.generateOptions([]);this.setState({options:options,value:{value:this.props.lang==='zh'?str.GLOBAL_ZH:str.GLOBAL_EN}});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.lang!==this.props.lang||prevProps.metric!==this.props.metric||prevProps.date!==this.props.date||prevState.countryOnly!==this.state.countryOnly){var options=this.generateOptions([]);this.setState({options:options});}if(prevState.isOpen!==this.state.isOpen||prevState.countryOnly!==this.state.countryOnly){this.props.ReactTooltip.rebuild();}if(prevProps.currentRegion!==this.props.currentRegion){var _this$props4=this.props,data=_this$props4.data,currentRegion=_this$props4.currentRegion,lang=_this$props4.lang;var englishRegion=_toConsumableArray(Array(currentRegion.length).keys()).map(function(i){return currentRegion.slice(0,i+1);}).map(function(regionList){return getDataFromRegion(data,regionList).ENGLISH;});this.setState({value:{value:lang==='zh'?currentRegion.join(''):englishRegion.join('')}});}}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isOpen=_this$state.isOpen,value=_this$state.value,countryOnly=_this$state.countryOnly;if(this.props.data==null)return;var MoreIcon=countryOnly?GoUnfold:GoFold;return/*#__PURE__*/React.createElement(\"div\",{className:\"current-region-wrap\"},/*#__PURE__*/React.createElement(RegionDropdown,{isOpen:isOpen,onClose:this.toggleOpen,target:/*#__PURE__*/React.createElement(\"div\",{className:\"current-region\",onClick:this.toggleOpen},/*#__PURE__*/React.createElement(\"div\",{\"data-tip\":this.displayRegionName(),\"data-tip-disable\":this.showTooltip(),\"data-place\":'bottom'},this.displayRegionName()),/*#__PURE__*/React.createElement(GoSearch,{size:18,className:\"dropdown-arrow\",style:{transform:'translateY(1px)'}}))},/*#__PURE__*/React.createElement(Select,{classNamePrefix:'region-select',autoFocus:true,backspaceRemovesValue:false,components:{DropdownIndicator:function DropdownIndicator(){return/*#__PURE__*/React.createElement(\"span\",{className:\"region-select-more\",onMouseUp:_this2.toggleCountryOnly,onTouchEnd:_this2.toggleCountryOnly,onMouseEnter:function onMouseEnter(){return _this2.props.ReactTooltip.show(_this2.regionSelectMore);},onMouseLeave:function onMouseLeave(){return _this2.props.ReactTooltip.hide(_this2.regionSelectMore);},ref:function ref(_ref){return _this2.regionSelectMore=_ref;},\"data-tip\":countryOnly?i18n.MORE_REGIONS_HELP_TEXT[_this2.props.lang]:i18n.LESS_REGIONS_HELP_TEXT[_this2.props.lang]},/*#__PURE__*/React.createElement(MoreIcon,{size:16,color:_this2.props.darkMode?'var(--primary-color-4)':'var(--primary-color-5)'}));},IndicatorSeparator:null},controlShouldRenderValue:false,hideSelectedOptions:false,isClearable:false,menuIsOpen:true,onChange:this.onSelectChange,options:this.state.options,placeholder:\"\".concat(i18n.SEARCH[this.props.lang],\" ...... \"),styles:this.props.darkMode?selectStylesDark:selectStyles,tabSelectsValue:false,value:value,noOptionsMessage:function noOptionsMessage(){return i18n.NO_RESULT[_this2.props.lang];}})),/*#__PURE__*/React.createElement(\"div\",{className:\"current-date\"},this.displayDate()));}}]);return Region;}(Component);export{Region as default};","map":{"version":3,"sources":["/Users/jonchristie/Downloads/covid19-master/src/components/Region.js"],"names":["React","Component","Select","GoFold","GoUnfold","GoSearch","RegionDropdown","RegionSelectOption","formatDate","getDataFromRegion","str","i18n","selectStyles","control","provided","state","minWidth","marginBottom","borderRadius","menu","backgroundColor","boxShadow","cursor","option","textAlign","fontSize","isFocused","isSelected","color","selectStylesDark","Region","isOpen","value","options","countryOnly","toggleOpen","setState","toggleCountryOnly","props","ReactTooltip","hide","regionSelectMore","onSelectChange","selected","regionToggle","region","generateOptions","root","data","lang","date","metric","englishRoot","Array","length","keys","map","i","slice","regionList","ENGLISH","regionData","Object","filter","d","includes","sort","a","b","aCount","bCount","forEach","push","join","label","childData","showSubRegions","CHINA_ZH","FRANCE_ZH","UK_ZH","NETHERLANDS_ZH","DENMARK_ZH","displayRegionName","currentRegion","Set","replace","INTL_CONVEYANCE_ZH","MAINLAND_CHINA_ZH","METRO_FRANCE_ZH","OVERSEAS_FRANCE_ZH","OVERSEAS_TERRITORIES_ZH","CROWN_DEPENDENCIES_ZH","englishRegion","reverse","CHINA_EN","MAINLAND_CHINA_EN","METRO_FRANCE_EN","FRANCE_EN","OVERSEAS_FRANCE_EN","INTL_CONVEYANCE_EN","US_EN","UK_EN","OVERSEAS_TERRITORIES_EN","UK_ABBR_EN","CROWN_DEPENDENCIES_EN","displayDate","showTooltip","elem","document","querySelector","offsetWidth","scrollWidth","GLOBAL_ZH","GLOBAL_EN","prevProps","prevState","rebuild","MoreIcon","transform","DropdownIndicator","show","ref","MORE_REGIONS_HELP_TEXT","LESS_REGIONS_HELP_TEXT","darkMode","IndicatorSeparator","SEARCH","NO_RESULT"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Select from 'react-select'\nimport { GoFold, GoUnfold, GoSearch } from 'react-icons/go'\nimport RegionDropdown from './RegionDropdown'\nimport RegionSelectOption from './RegionSelectOption'\nimport { formatDate, getDataFromRegion } from '../utils/utils'\nimport * as str from '../utils/strings'\nimport i18n from '../data/i18n.yml'\n\nconst selectStyles = {\n    control: (provided, state) => ({\n        ...provided,\n        minWidth: 240,\n        marginBottom: 8,\n        borderRadius: 30\n    }),\n    menu: () => ({\n        backgroundColor: 'white',\n        boxShadow: '0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',\n        cursor: 'pointer'\n    }),\n    option: (provided, state) => ({\n        ...provided,\n        textAlign: 'left',\n        fontSize: 12,\n        backgroundColor: state.isFocused ? 'var(--primary-color-5)' : state.isSelected ? '#eee' : null,\n        color: state.isFocused ? '#fff' : '#000',\n        cursor: 'pointer'\n    })\n}\n\nconst selectStylesDark = {\n    control: (provided, state) => ({\n        ...provided,\n        minWidth: 240,\n        marginBottom: 8,\n        borderRadius: 30\n    }),\n    menu: () => ({\n        backgroundColor: 'var(--dark-grey)',\n        boxShadow: '0 0 0 1px hsla(218, 50%, 10%, 0.1), 0 4px 11px hsla(218, 50%, 10%, 0.1)',\n        cursor: 'pointer'\n    }),\n    option: (provided, state) => ({\n        ...provided,\n        textAlign: 'left',\n        fontSize: 12,\n        backgroundColor: state.isFocused ? 'var(--primary-color-4)' : state.isSelected ? '#777' : null,\n        color: 'var(--lighter-grey)',\n        cursor: 'pointer'\n    })\n}\n\nexport default class Region extends Component {\n    state = {\n        isOpen: false,\n        //value: undefined,\n        value: 'en',\n        options: [],\n        countryOnly: true\n    }\n\n    componentDidMount() {\n        const options = this.generateOptions([])\n        this.setState({ options, value: { value: this.props.lang === 'zh' ? str.GLOBAL_ZH : str.GLOBAL_EN } })\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (\n            prevProps.lang !== this.props.lang ||\n            prevProps.metric !== this.props.metric ||\n            prevProps.date !== this.props.date ||\n            prevState.countryOnly !== this.state.countryOnly\n        ) {\n            const options = this.generateOptions([])\n            this.setState({ options })\n        }\n\n        if (prevState.isOpen !== this.state.isOpen || prevState.countryOnly !== this.state.countryOnly) {\n            this.props.ReactTooltip.rebuild()\n        }\n\n        if (prevProps.currentRegion !== this.props.currentRegion) {\n            const { data, currentRegion, lang } = this.props\n            const englishRegion = [ ...Array(currentRegion.length).keys() ]\n                .map((i) => currentRegion.slice(0, i + 1))\n                .map((regionList) => getDataFromRegion(data, regionList).ENGLISH)\n            this.setState({ value: { value: lang === 'zh' ? currentRegion.join('') : englishRegion.join('') } })\n        }\n    }\n\n    toggleOpen = () => {\n        this.setState((state) => ({ isOpen: !state.isOpen }))\n    }\n\n    toggleCountryOnly = () => {\n        this.props.ReactTooltip.hide(this.regionSelectMore)\n        this.setState({\n            countryOnly: !this.state.countryOnly\n        })\n    }\n\n    onSelectChange = (selected) => {\n        this.toggleOpen()\n        this.setState({ value: selected })\n        this.props.regionToggle(selected.region)\n    }\n\n    generateOptions = (root) => {\n        const { data, lang, date, metric } = this.props\n        const englishRoot = [ ...Array(root.length).keys() ]\n            .map((i) => root.slice(0, i + 1))\n            .map((regionList) => getDataFromRegion(data, regionList).ENGLISH)\n\n        let options = []\n        const regionData = getDataFromRegion(data, root)\n        Object.keys(regionData)\n            .filter((d) => ![ 'confirmedCount', 'deadCount', 'curedCount', 'ENGLISH' ].includes(d))\n            .sort((a, b) => {\n                const aCount = regionData[a][metric][date] ? regionData[a][metric][date] : 0\n                const bCount = regionData[b][metric][date] ? regionData[b][metric][date] : 0\n                return aCount > bCount ? -1 : 1\n            })\n            .forEach((d) => {\n                options.push({\n                    value: lang === 'zh' ? [ ...root, d ].join('') : [ ...englishRoot, regionData[d].ENGLISH ].join(''),\n                    region: [ ...root, d ],\n                    label: (\n                        <RegionSelectOption\n                            region={lang === 'zh' ? [ ...root, d ] : [ ...englishRoot, regionData[d].ENGLISH ]}\n                            data={regionData[d]}\n                            date={date}\n                            metric={metric}\n                        />\n                    )\n                })\n                const childData = getDataFromRegion(data, [ ...root, d ])\n                const showSubRegions = [ str.CHINA_ZH, str.FRANCE_ZH, str.UK_ZH, str.NETHERLANDS_ZH, str.DENMARK_ZH ]\n                if (\n                    Object.keys(childData).length > 4 &&\n                    (!this.state.countryOnly || (root.length === 0 && showSubRegions.includes(d)))\n                )\n                    options = [ ...options, ...this.generateOptions([ ...root, d ]) ]\n            })\n\n        return options\n    }\n\n    displayRegionName = () => {\n        const { currentRegion, data, lang } = this.props\n\n        // remove duplicates in case same region occurs at different level (e.g. Japan)\n        let region = [ ...new Set(currentRegion) ]\n\n        if (lang === 'zh') {\n            region = region.join('')\n            // China\n            region = region !== str.CHINA_ZH ? region.replace(str.CHINA_ZH, '') : str.CHINA_ZH\n            region =\n                region !== str.INTL_CONVEYANCE_ZH ? region.replace(str.INTL_CONVEYANCE_ZH, '') : str.INTL_CONVEYANCE_ZH\n            region =\n                region !== str.MAINLAND_CHINA_ZH ? region.replace(str.MAINLAND_CHINA_ZH, '') : str.MAINLAND_CHINA_ZH\n\n            // France\n            region =\n                region !== `${str.FRANCE_ZH}${str.METRO_FRANCE_ZH}`\n                    ? region.replace(str.METRO_FRANCE_ZH, '')\n                    : str.METRO_FRANCE_ZH\n            region =\n                region !== `${str.FRANCE_ZH}${str.OVERSEAS_FRANCE_ZH}`\n                    ? region.replace(`${str.FRANCE_ZH}${str.OVERSEAS_FRANCE_ZH}`, '')\n                    : `${str.FRANCE_ZH}${str.OVERSEAS_FRANCE_ZH}`\n\n            // UK\n            region =\n                region !== `${str.UK_ZH}${str.OVERSEAS_TERRITORIES_ZH}`\n                    ? region.replace(`${str.UK_ZH}${str.OVERSEAS_TERRITORIES_ZH}`, '')\n                    : `${str.UK_ZH}${str.OVERSEAS_TERRITORIES_ZH}`\n            region =\n                region !== `${str.UK_ZH}${str.CROWN_DEPENDENCIES_ZH}`\n                    ? region.replace(`${str.UK_ZH}${str.CROWN_DEPENDENCIES_ZH}`, '')\n                    : `${str.UK_ZH}${str.CROWN_DEPENDENCIES_ZH}`\n\n            return region\n        } else {\n            if (data == null) return\n            let englishRegion = [ ...Array(currentRegion.length).keys() ]\n                .map((i) => currentRegion.slice(0, i + 1))\n                .map((regionList) => getDataFromRegion(data, regionList).ENGLISH)\n            englishRegion = [ ...new Set(englishRegion) ]\n            region = englishRegion.reverse().join(', ')\n\n            // China\n            region = region !== str.CHINA_EN ? region.replace(`, ${str.CHINA_EN}`, '') : str.CHINA_EN\n            region =\n                region !== str.MAINLAND_CHINA_EN\n                    ? region.replace(`, ${str.MAINLAND_CHINA_EN}`, '')\n                    : str.MAINLAND_CHINA_EN\n\n            // France\n            region =\n                region !== `${str.METRO_FRANCE_EN}, ${str.FRANCE_EN}`\n                    ? region.replace(`, ${str.METRO_FRANCE_EN}`, '')\n                    : str.METRO_FRANCE_EN\n            region =\n                region !== `${str.OVERSEAS_FRANCE_EN}, ${str.FRANCE_EN}`\n                    ? region.replace(`, ${str.OVERSEAS_FRANCE_EN}, ${str.FRANCE_EN}`, '')\n                    : str.OVERSEAS_FRANCE_EN\n\n            // Cruise ship\n            region =\n                region !== str.INTL_CONVEYANCE_EN\n                    ? region.replace(`, ${str.INTL_CONVEYANCE_EN}`, '')\n                    : str.INTL_CONVEYANCE_EN\n\n            // USA\n            region = region !== str.US_EN ? region.replace(str.US_EN, 'US') : str.US_EN\n\n            // UK\n            region = region !== str.UK_EN ? region.replace(str.UK_EN, 'UK') : str.UK_EN\n            region =\n                region !== `${str.OVERSEAS_TERRITORIES_EN}, ${str.UK_ABBR_EN}`\n                    ? region.replace(`, ${str.OVERSEAS_TERRITORIES_EN}, ${str.UK_ABBR_EN}`, '')\n                    : str.OVERSEAS_TERRITORIES_EN\n            region =\n                region !== `${str.CROWN_DEPENDENCIES_EN}, ${str.UK_ABBR_EN}`\n                    ? region.replace(`, ${str.CROWN_DEPENDENCIES_EN}, ${str.UK_ABBR_EN}`, '')\n                    : str.CROWN_DEPENDENCIES_EN\n\n            return region\n        }\n    }\n\n    displayDate = () => {\n        const { lang, date } = this.props\n        return formatDate(date, lang)\n    }\n\n    showTooltip = () => {\n        // show tooltip only when text is overflow\n        const elem = document.querySelector(`.current-region div`)\n        if (elem == null) return true\n        return elem.offsetWidth === elem.scrollWidth\n    }\n\n    render() {\n        const { isOpen, value, countryOnly } = this.state\n        if (this.props.data == null) return\n\n        const MoreIcon = countryOnly ? GoUnfold : GoFold\n\n        return (\n            <div className=\"current-region-wrap\">\n                <RegionDropdown\n                    isOpen={isOpen}\n                    onClose={this.toggleOpen}\n                    target={\n                        <div className=\"current-region\" onClick={this.toggleOpen}>\n                            <div\n                                data-tip={this.displayRegionName()}\n                                data-tip-disable={this.showTooltip()}\n                                data-place={'bottom'}\n                            >\n                                {this.displayRegionName()}\n                            </div>\n                            <GoSearch size={18} className=\"dropdown-arrow\" style={{ transform: 'translateY(1px)' }} />\n                        </div>\n                    }\n                >\n                    <Select\n                        classNamePrefix={'region-select'}\n                        autoFocus\n                        backspaceRemovesValue={false}\n                        components={{\n                            DropdownIndicator: () => (\n                                <span\n                                    className=\"region-select-more\"\n                                    onMouseUp={this.toggleCountryOnly}\n                                    onTouchEnd={this.toggleCountryOnly}\n                                    onMouseEnter={() => this.props.ReactTooltip.show(this.regionSelectMore)}\n                                    onMouseLeave={() => this.props.ReactTooltip.hide(this.regionSelectMore)}\n                                    ref={(ref) => (this.regionSelectMore = ref)}\n                                    data-tip={\n                                        countryOnly ? (\n                                            i18n.MORE_REGIONS_HELP_TEXT[this.props.lang]\n                                        ) : (\n                                            i18n.LESS_REGIONS_HELP_TEXT[this.props.lang]\n                                        )\n                                    }\n                                >\n                                    <MoreIcon\n                                        size={16}\n                                        color={\n                                            this.props.darkMode ? 'var(--primary-color-4)' : 'var(--primary-color-5)'\n                                        }\n                                    />\n                                </span>\n                            ),\n                            IndicatorSeparator: null\n                        }}\n                        controlShouldRenderValue={false}\n                        hideSelectedOptions={false}\n                        isClearable={false}\n                        menuIsOpen\n                        onChange={this.onSelectChange}\n                        options={this.state.options}\n                        placeholder={`${i18n.SEARCH[this.props.lang]} ...... `}\n                        styles={this.props.darkMode ? selectStylesDark : selectStyles}\n                        tabSelectsValue={false}\n                        value={value}\n                        noOptionsMessage={() => i18n.NO_RESULT[this.props.lang]}\n                    />\n                </RegionDropdown>\n                <div className=\"current-date\">{this.displayDate()}</div>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}