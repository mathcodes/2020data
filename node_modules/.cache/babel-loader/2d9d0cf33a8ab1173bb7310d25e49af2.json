{"ast":null,"code":"import _classCallCheck from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jonchristie/Downloads/covid19-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,Fragment}from'react';import{Slider,Rail,Handles,Tracks,Ticks}from'react-compound-slider';import format from'date-fns/format';import{scaleTime}from'd3-scale';import{timeDay}from'd3-time';import{parseDate,isoDate}from'../utils/utils';import i18n from'../data/i18n.yml';function formatTick(ms,lang){return format(new Date(ms),i18n.DATE_FORMAT_1[lang]);}var DateSlider=/*#__PURE__*/function(_Component){_inherits(DateSlider,_Component);var _super=_createSuper(DateSlider);function DateSlider(){_classCallCheck(this,DateSlider);return _super.apply(this,arguments);}_createClass(DateSlider,[{key:\"render\",value:function render(){var _this$props=this.props,date=_this$props.date,lang=_this$props.lang,startDate=_this$props.startDate,endDate=_this$props.endDate,handleDateChange=_this$props.handleDateChange,handleTempDateChange=_this$props.handleTempDateChange,fullMap=_this$props.fullMap,fullPlot=_this$props.fullPlot,plotDates=_this$props.plotDates;var min=parseDate(startDate);var max=parseDate(endDate);min=new Date(min.getTime()+1000*60*(max.getTimezoneOffset()-min.getTimezoneOffset()));var numberOfDays=(max-min)/(1000*3600*24);var dateTicksInterval=Math.round(numberOfDays/(!fullMap?10:15));var dateTicks=scaleTime().domain([min,max]).ticks(// hack to fix unwanted behavior (https://github.com/d3/d3/issues/2240)\ntimeDay.filter(function(d){return timeDay.count(0,d)%dateTicksInterval===0;})).map(function(d){return+d;});var values=!fullPlot?[date]:plotDates;values=values.map(function(x){var d=parseDate(x);d=new Date(d.getTime()+1000*60*(max.getTimezoneOffset()-d.getTimezoneOffset()));return+d;});return/*#__PURE__*/React.createElement(Slider,{className:\"date-slider\",mode:1,step:1000*60*60*24,domain:[+min,+max],onChange:function onChange(time){if(!fullPlot)handleDateChange(isoDate(time[0],endDate).slice(0,10));},onUpdate:handleTempDateChange,values:values},/*#__PURE__*/React.createElement(Rail,null,function(_ref){var getRailProps=_ref.getRailProps;return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",Object.assign({className:\"date-slider-rail-outer\"},getRailProps())),/*#__PURE__*/React.createElement(\"div\",{className:\"date-slider-rail-inner\"}));}),/*#__PURE__*/React.createElement(Handles,null,function(_ref2){var handles=_ref2.handles,getHandleProps=_ref2.getHandleProps;return/*#__PURE__*/React.createElement(\"div\",null,handles.map(function(handle,index){return/*#__PURE__*/React.createElement(Fragment,{key:\"handle-\".concat(index)},/*#__PURE__*/React.createElement(\"div\",Object.assign({className:\"date-slider-handle-outer\",style:{left:\"\".concat(handle.percent,\"%\")}},getHandleProps(handle.id))),/*#__PURE__*/React.createElement(\"div\",{role:\"slider\",className:\"date-slider-handle-inner\"// eslint-disable-next-line\n,\"aria-valuemin\":+min// eslint-disable-next-line\n,\"aria-valuemax\":+max,\"aria-valuenow\":handle.value,style:{left:\"\".concat(handle.percent,\"%\")}}));}));}),/*#__PURE__*/React.createElement(Tracks,{left:!fullPlot,right:false},function(_ref3){var tracks=_ref3.tracks,getTrackProps=_ref3.getTrackProps;return/*#__PURE__*/React.createElement(\"div\",null,tracks.map(function(_ref4){var id=_ref4.id,source=_ref4.source,target=_ref4.target;return/*#__PURE__*/React.createElement(\"div\",Object.assign({key:\"track-\".concat(id),className:\"date-slider-track\",style:{left:\"\".concat(source.percent,\"%\"),width:\"\".concat(target.percent-source.percent,\"%\")}},getTrackProps()));}));}),/*#__PURE__*/React.createElement(Ticks,{values:dateTicks},function(_ref5){var ticks=_ref5.ticks;return/*#__PURE__*/React.createElement(\"div\",null,ticks.map(function(tick,index){return/*#__PURE__*/React.createElement(\"div\",{key:\"tick-\".concat(index)},/*#__PURE__*/React.createElement(\"div\",{className:\"date-slider-tick\",style:{left:\"\".concat(tick.percent,\"%\")}}),/*#__PURE__*/React.createElement(\"div\",{className:\"date-slider-tick-text\",style:{marginLeft:\"\".concat(-(100/ticks.length)/2,\"%\"),width:\"\".concat(100/ticks.length,\"%\"),left:\"\".concat(tick.percent,\"%\")}},formatTick(tick.value,lang)));}));}));}}]);return DateSlider;}(Component);export{DateSlider as default};","map":{"version":3,"sources":["/Users/jonchristie/Downloads/covid19-master/src/components/DateSlider.js"],"names":["React","Component","Fragment","Slider","Rail","Handles","Tracks","Ticks","format","scaleTime","timeDay","parseDate","isoDate","i18n","formatTick","ms","lang","Date","DATE_FORMAT_1","DateSlider","props","date","startDate","endDate","handleDateChange","handleTempDateChange","fullMap","fullPlot","plotDates","min","max","getTime","getTimezoneOffset","numberOfDays","dateTicksInterval","Math","round","dateTicks","domain","ticks","filter","d","count","map","values","x","time","slice","getRailProps","handles","getHandleProps","handle","index","left","percent","id","value","tracks","getTrackProps","source","target","width","tick","marginLeft","length"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport { Slider, Rail, Handles, Tracks, Ticks } from 'react-compound-slider'\nimport format from 'date-fns/format'\nimport { scaleTime } from 'd3-scale'\nimport { timeDay } from 'd3-time'\nimport { parseDate, isoDate } from '../utils/utils'\nimport i18n from '../data/i18n.yml'\n\nfunction formatTick(ms, lang) {\n    return format(new Date(ms), i18n.DATE_FORMAT_1[lang])\n}\n\nexport default class DateSlider extends Component {\n    render() {\n        const {\n            date,\n            lang,\n            startDate,\n            endDate,\n            handleDateChange,\n            handleTempDateChange,\n            fullMap,\n            fullPlot,\n            plotDates\n        } = this.props\n        let min = parseDate(startDate)\n        const max = parseDate(endDate)\n        min = new Date(min.getTime() + 1000 * 60 * (max.getTimezoneOffset() - min.getTimezoneOffset()))\n\n        const numberOfDays = (max - min) / (1000 * 3600 * 24)\n        const dateTicksInterval = Math.round(numberOfDays / (!fullMap ? 10 : 15))\n\n        const dateTicks = scaleTime()\n            .domain([ min, max ])\n            .ticks(\n                // hack to fix unwanted behavior (https://github.com/d3/d3/issues/2240)\n                timeDay.filter(function(d) {\n                    return timeDay.count(0, d) % dateTicksInterval === 0\n                })\n            )\n            .map((d) => +d)\n\n        let values = !fullPlot ? [ date ] : plotDates\n        values = values.map((x) => {\n            let d = parseDate(x)\n            d = new Date(d.getTime() + 1000 * 60 * (max.getTimezoneOffset() - d.getTimezoneOffset()))\n            return +d\n        })\n\n        return (\n            <Slider\n                className=\"date-slider\"\n                mode={1}\n                step={1000 * 60 * 60 * 24}\n                domain={[ +min, +max ]}\n                onChange={(time) => {\n                    if (!fullPlot) handleDateChange(isoDate(time[0], endDate).slice(0, 10))\n                }}\n                onUpdate={handleTempDateChange}\n                values={values}\n            >\n                <Rail>\n                    {({ getRailProps }) => (\n                        <Fragment>\n                            <div className=\"date-slider-rail-outer\" {...getRailProps()} />\n                            <div className=\"date-slider-rail-inner\" />\n                        </Fragment>\n                    )}\n                </Rail>\n                <Handles>\n                    {({ handles, getHandleProps }) => (\n                        <div>\n                            {handles.map((handle, index) => (\n                                <Fragment key={`handle-${index}`}>\n                                    <div\n                                        className=\"date-slider-handle-outer\"\n                                        style={{\n                                            left: `${handle.percent}%`\n                                        }}\n                                        {...getHandleProps(handle.id)}\n                                    />\n                                    <div\n                                        role=\"slider\"\n                                        className=\"date-slider-handle-inner\"\n                                        // eslint-disable-next-line\n                                        aria-valuemin={+min}\n                                        // eslint-disable-next-line\n                                        aria-valuemax={+max}\n                                        aria-valuenow={handle.value}\n                                        style={{\n                                            left: `${handle.percent}%`\n                                        }}\n                                    />\n                                </Fragment>\n                            ))}\n                        </div>\n                    )}\n                </Handles>\n                <Tracks left={!fullPlot} right={false}>\n                    {({ tracks, getTrackProps }) => (\n                        <div>\n                            {tracks.map(({ id, source, target }) => (\n                                <div\n                                    key={`track-${id}`}\n                                    className=\"date-slider-track\"\n                                    style={{\n                                        left: `${source.percent}%`,\n                                        width: `${target.percent - source.percent}%`\n                                    }}\n                                    {...getTrackProps()}\n                                />\n                            ))}\n                        </div>\n                    )}\n                </Tracks>\n                <Ticks values={dateTicks}>\n                    {({ ticks }) => (\n                        <div>\n                            {ticks.map((tick, index) => (\n                                <div key={`tick-${index}`}>\n                                    <div\n                                        className=\"date-slider-tick\"\n                                        style={{\n                                            left: `${tick.percent}%`\n                                        }}\n                                    />\n                                    <div\n                                        className=\"date-slider-tick-text\"\n                                        style={{\n                                            marginLeft: `${-(100 / ticks.length) / 2}%`,\n                                            width: `${100 / ticks.length}%`,\n                                            left: `${tick.percent}%`\n                                        }}\n                                    >\n                                        {formatTick(tick.value, lang)}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </Ticks>\n            </Slider>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}